webpackJsonp([4],{"1Q9p":function(e,t){},TGjL:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("1VE5"),a=s("mtWM"),i=s.n(a),n={name:"componentRegisterTimeManage",props:{registerInfoArray:Array,user_info:Object},data:function(){return{}},methods:{redirectToStudentRegisterManage:function(e){this.$store.commit("setStoreCurrentRegisterTime",e.time),this.$router.push({path:"/studentRegisterManagePage"})},deleteRegisterInfo:function(e){var t=this;i.a.get(this.GLOBAL.host+"/deleteRecord",{params:{user_id:this.user_info.user.userId,user_password:this.user_info.user.userPassword,classNo:this.$store.state.storeCurrentClassNo,time:e.time}}).then(function(e){console.log(e),200===e.status&&(t.$message({message:"删除成功",type:"success"}),t.$router.go(0))})}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.registerInfoArray,border:""}},[s("el-table-column",{attrs:{fixed:"",label:"序号","header-align":"center",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticStyle:{"font-size":"15px"}},[e._v("第"+e._s(t.$index+1)+"次考勤")])]}}])}),e._v(" "),s("el-table-column",{attrs:{fixed:"",prop:"time",align:"center",label:"考勤时间","header-align":"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("i",{staticClass:"el-icon-time",staticStyle:{"font-size":"15px"}}),e._v(" "),s("span",{staticStyle:{"margin-left":"5px","font-size":"15px"}},[e._v(e._s(t.row.time))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"every_register_sit",align:"center",label:"操作","header-align":"center","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{staticClass:"el-button-local",attrs:{type:"success",size:"mini"},on:{click:function(s){return e.redirectToStudentRegisterManage(t.row)}}},[e._v("管理本次签到")]),e._v(" "),s("el-button",{staticClass:"el-button-local",attrs:{type:"danger",size:"mini"},on:{click:function(s){return e.deleteRegisterInfo(t.row)}}},[e._v("删除本次签到")])]}}])})],1)},staticRenderFns:[]};var c={name:"register-time-manage-factory",components:{componentRegisterTimeManage:s("VU/8")(n,o,!1,function(e){s("TlJe")},"data-v-23f8d96e",null).exports},data:function(){return{courseData:{classNo:this.$store.state.storeCurrentClassNo,courseName:this.$store.state.storeCurrentCourseName,teacherName:this.$cookies.get("user_info").user_name,teacherId:this.$cookies.get("user_info").user.user_id}}},methods:{addNewRegister:function(){this.$parent.addNewRegisterInfoChildPower()}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticStyle:{"border-radius":"4px",margin:"20px 20px 0px 20px","background-color":"#f3efec",padding:"10px 20px 10px 20px",display:"flex"}},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/homePage"}}},[e._v("首页")]),e._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/classManagePage"}}},[e._v("教学班管理")]),e._v(" "),s("el-breadcrumb-item",[e._v("考勤次数信息管理")])],1)],1),e._v(" "),s("div",{staticStyle:{margin:"10px 20px 20px 20px"}},[s("el-card",{staticClass:"box-card",staticStyle:{padding:"0px"}},[s("div",{staticStyle:{float:"left","margin-bottom":"15px"}},[s("span",[e._v(e._s(this.courseData.classNo))]),e._v(" "),s("span",[e._v(e._s(this.courseData.courseName))]),e._v(" "),s("span",[e._v(e._s(this.courseData.teacherName))]),e._v(" "),s("span",[e._v(e._s(this.courseData.teacherId))]),e._v(" "),s("el-button",{staticClass:"el-button-local",attrs:{type:"success",size:"mini"},on:{click:e.addNewRegister}},[e._v("新增考勤信息")]),e._v(" "),s("el-button",{staticClass:"el-button-local",attrs:{type:"success",size:"mini"},on:{click:function(t){return e.handleClick(e.scope.row)}}},[e._v("导出EXCEL")])],1)]),e._v(" "),s("el-card",{staticClass:"box-card",attrs:{"body-style":"padding:0px;"}},[s("div",{staticStyle:{display:"flex"},attrs:{slot:"header"},slot:"header"},[e._v("\n          考勤次数信息列表\n        ")]),e._v(" "),s("componentRegisterTimeManage",e._b({},"componentRegisterTimeManage",e.$attrs,!1))],1)],1)])},staticRenderFns:[]};var u=s("VU/8")(c,l,!1,function(e){s("1Q9p")},"data-v-4eb45b69",null).exports,d={name:"RegisterTimeManagePage",created:function(){this.$cookies.isKey("user_info")?this.user_info=this.$cookies.get("user_info"):this.$router.push({path:"/login"}),this.getAllRegisterInfo()},components:{headFactory:r.a,registerTimeManageFactory:u},data:function(){return{user_info:{},current_register_info:[],power:!0,registerData:"",dialogVisible:!1}},methods:{setCurrentTerm:function(){this.$router.push({path:"/classManagePage"})},getAllRegisterInfo:function(){var e=this;i.a.get(this.GLOBAL.host+"/getAbsenceManageCountInfo",{params:{user_id:this.user_info.user.userId,user_password:this.user_info.user.userPassword,classNo:this.$store.state.storeCurrentClassNo,classYear:this.$store.state.termInfo.clickChildrenTerm,className:this.$store.state.storeCurrentClassName}}).then(function(t){200===t.status&&(e.current_register_info=t.data)})},addNewRegisterInfoChildPower:function(){var e=this;this.dialogVisible=!0,i.a.get(this.GLOBAL.host+"/getManageAbsenceInfo",{params:{user_id:this.user_info.user.userId,user_password:this.user_info.user.userPassword,classNo:this.$store.state.storeCurrentClassNo,classYear:this.$store.state.termInfo.clickChildrenTerm,className:this.$store.state.storeCurrentClassName,courseName:this.$store.state.storeCurrentCourseName}}).then(function(t){200===t.status&&(e.registerData=t.data,e.getAllRegisterInfo())})},handleClose:function(e){var t=this;this.$confirm("确认停止签到？").then(function(s){t.requestStopRegister(),e()}).catch(function(e){})},requestStopRegister:function(){var e=this;i.a.get(this.GLOBAL.host+"/endAttendance",{params:{classNo:this.$store.state.storeCurrentClassNo,classYear:this.$store.state.termInfo.clickChildrenTerm}}).then(function(t){200===t.status&&(e.dialogVisible=!1)})}}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("head-factory",{attrs:{active:2,user:e.user_info,powerMenu:e.power}}),e._v(" "),s("register-time-manage-factory",{attrs:{registerInfoArray:e.current_register_info,user_info:e.user_info}}),e._v(" "),s("el-dialog",{attrs:{title:"发布签到码",visible:e.dialogVisible,width:"30%","before-close":e.handleClose,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("div",{staticStyle:{"text-align":"center","font-size":"15px"}},[s("span",[e._v("签到码为:  ")]),e._v(" "),s("span",[s("el-tag",{staticStyle:{"font-size":"20px"},attrs:{size:"medium"}},[e._v(e._s(e.registerData))])],1)]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.requestStopRegister}},[e._v("停止签到")])],1)])],1)},staticRenderFns:[]};var g=s("VU/8")(d,f,!1,function(e){s("bDiz")},"data-v-15a22e8f",null);t.default=g.exports},TlJe:function(e,t){},bDiz:function(e,t){}});
//# sourceMappingURL=4.4591753776b6199b4540.js.map